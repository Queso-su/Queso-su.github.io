<!DOCTYPE html>




<link rel="stylesheet" href="https://queso-su.github.io/custom.min.c9129ebdfbcf0b80b394058ee8b6a04a7c87c4047f28dde6950638b4f51fc5b5.css" integrity="sha256-yRKevfvPC4CzlAWO6LagSnyHxAR/KN3mlQY4tPUfxbU=" media="screen">

<html lang="zh-cn" dir="ltr">
<head>

  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>无公网IP如何异地组网(AIO No.1) - QuesoX</title>

</head>
<body class="block-main">


  <main >

      
    

<header><!DOCTYPE html>
<html lang="zh-cn">
  <head>
    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    
    <title>无公网IP如何异地组网(AIO No.1) - QuesoX</title>
  </head>


  <body >

    <div class="header-container">

      <div class="header-title-div">
        <a href="/" class="header-title-text">
            QuesoX 
            
        </a>
        <a href="https://github.com/Queso-su/" class="header-title-github">
          
          <img src="https://queso-su.github.io/icon/github_icon.svg" alt="主题" class="header-tab-img">
    
        </a>
      </div>

      <div class="header-tab-div">

        
        <a href="/blog" class="header-tab-item-div">
          
          <img src="https://queso-su.github.io/icon/laptop_icon.svg" alt="博客" class="header-tab-img">
          
          <p  class="header-tab-text">博客</p>
        </a>

        
        <a href="/tags/live" class="header-tab-item-div">
          <img src="https://queso-su.github.io/icon/music_icon.svg" alt="生活" class="header-tab-img">
          <p  class="header-tab-text">生活</p>
        </a>

        <a href="/setting" class="header-tab-item-div">
          <img src="https://queso-su.github.io/icon/pencilbox_icon.svg" alt="工具" class="header-tab-img">
          <p  class="header-tab-text">工具</p>
        </a>
        
        <a href="/about" class="header-tab-item-div">
          <img src="https://queso-su.github.io/icon/pencil_icon.svg" alt="关于" class="header-tab-img">
          <p  class="header-tab-text">关于</p>
        
        </a>



      </div>


    </div>


  </body>
</html>
  
  </header>

<div class = "toc-wrapper">
    
<div class="post-toc">
     
    <aside>
        <header>
        <h3>目录</h3>

        </header><nav id="TableOfContents">
  <ul>
    <li><a href="#写这个干啥">写这个干啥</a></li>
    <li><a href="#异地组网是什么">异地组网是什么</a>
      <ul>
        <li><a href="#应用场景">应用场景</a></li>
      </ul>
    </li>
    <li><a href="#开始">开始</a>
      <ul>
        <li><a href="#what-should-u-need">What should u need?</a></li>
        <li><a href="#nat检测">NAT检测</a></li>
        <li><a href="#zerotier">Zerotier</a></li>
      </ul>
    </li>
    <li><a href="#应用部分">应用部分</a>
      <ul>
        <li><a href="#远程桌面游戏串流-moonlightsunshine">远程桌面游戏串流 Moonlight+sunshine</a></li>
        <li><a href="#群晖与webdav以及文件传输访问">群晖与webdav以及文件传输访问</a></li>
      </ul>
    </li>
  </ul>
</nav></aside>
    <a href="#" id="toc-toggle"></a>
     
    </div>
    


</div> 
<div class="single-container-pre">


    
        
    <div class="single-title-div">
        <h1 class="single-title-div-text">无公网IP如何异地组网(AIO No.1)</h1>

        <form name="input" action="javascript:history.back()" method="post" class="right">
        <input type="submit" value="Back" class="single-btn-back">
        </form>

     

    </div>

    <div class="single-time">
        

        
        
        
        <time datetime="2025-01-01" >January 1, 2025</time>

        

    </div>

    
    <div class="single-div">
        
        <div class="single-c-div">
            <img src=http://images.quesox.com/i/2025/01/06/677b8c51889fb.jpg class="single-img"></img>
        
        

            <div class="single-content">
                <blockquote>
<p>好奇与懒惰是驱动人类进步的最佳动力。</p></blockquote>
<h2 id="写这个干啥">写这个干啥</h2>
<p>前段时间家里的服务器的IP一直内外网切换（坐标 广西北海联通），虽然解决了切换的问题，但是狡兔三窟，以防万一就做了个异地组网。实现无感访问PVE里的黑裙和WIndows，以及实现了串流游戏。这里我使用的是ZEROTIER，当然也有别的比如Tailscale，OpenP2P ，星空组网等等。</p>
<h2 id="异地组网是什么">异地组网是什么</h2>
<p>异地组网是指将分布在不同地理位置的网络设备通过特定的技术手段连接起来，形成一个统一的虚拟网络。这种技术允许不同地点的设备能够像在同一局域网内一样进行通信和资源共享。</p>
<p>比如你家里的路由器内网是192.168.x.x,是独立的一个网段，它可以拓展出一个网段（虚拟局域网），将你的所有设备连接一起，通过ip或者各种方式访问。</p>
<h3 id="应用场景">应用场景</h3>
<p>远程监控与管理，对远程设备的实时监控和管理，提高运维效率。</p>
<p>游戏与娱乐，串流游戏PC或，实现游戏玩家之间的低延迟直连，如MC局域网联机，如Moonlight串流。</p>
<h2 id="开始">开始</h2>
<h3 id="what-should-u-need">What should u need?</h3>
<p><a href="https://www.zerotier.com/">ZeroTier (组网工具）</a><br>
<a href="https://mao.fan/mynat">NAT类型检测（感谢创建这个网站的作者）</a></p>
<p>可选部分：</p>
<p><a href="https://github.com/LizardByte/Sunshine/releases">Sunshine（用于游戏串流的服务端）</a><br>
<a href="https://github.com/moonlight-stream/moonlight-qt/releases/tag/v6.1.0">Moonlight-qt（用于游戏串流的客户端）</a></p>
<p><a href="https://www.todesk.com/">Todesk(维护使用的PlanB)</a></p>
<p><a href="https://www.raidrive.com/">RaiDrive(将webdav映射为硬盘)</a></p>
<h3 id="nat检测">NAT检测</h3>
<p>我们所使用的ZeroTier是通过P2P类型打洞进行工作连接的</p>
<p>NAT类型可能会对连接产生影响。特别是对于需要直接P2P（点对点）连接的游戏来说，NAT的复杂性可能会增加连接的难度和延迟。</p>
<p>上面给的NAT类型检测中有测试以及介绍</p>
<p>一般来说 NAT1到NAT3都可以顺利打洞进行连接，但最好控制在2和1，详细操作部分请自行Bing搜索 ，这边给出的建议操作是</p>
<p>是否是校园网 -&gt;检查路由器NAT-&gt; DMZ 是否需要开启 -&gt; 检查光猫
<img src="http://images.quesox.com/i/2025/01/06/677b8d6edf3d5.webp" alt="c9d57592ae350dae7d2faee5285b1ec156a051e2_2_1035x520.webp"></p>
<h3 id="zerotier">Zerotier</h3>
<p>分为网页和客户端</p>
<h4 id="网页部分">网页部分</h4>
<ol>
<li>
<p>注册账号，选择基本模式
<img src="http://images.quesox.com/i/2025/01/06/677b8c4918ee3.webp" alt="1f460b5414c66a8e14efefff284a2afcb8b2f40e_2_832x748.webp"></p>
</li>
<li>
<p>创建一个新的网络（create new network）
<img src="http://images.quesox.com/i/2025/01/06/677b8c49ae66c.webp" alt="fe4fcc8dc041cb2afd55a7c1fc4b949b13183616_2_1035x438.webp"></p>
</li>
<li>
<p>进入网络，找到你的网络ID，复制后到客户端操作
<img src="http://images.quesox.com/i/2025/01/06/677b8c4a9124a.webp" alt="3cec6626dc0d9270e7f7fc3ee6dceb4f39b1e674.webp">
<img src="http://images.quesox.com/i/2025/01/06/677b8c4b3c1fc.webp" alt="895ded680ef336d9cea42656b7425a8b460b8877.webp"></p>
</li>
<li>
<p>授权客户端（这一步需要你完成客户端操作后再进行），先打上钩，然后Authorize，添加完成</p>
</li>
</ol>
<h4 id="客户端操作">客户端操作</h4>
<ol>
<li>
<p>将你的每一台设备都装上对应客户端，在网页的download部分，不需要下载Server</p>
</li>
<li>
<p>启动后，右下角找到小图标，JoinNew new network,填写你刚刚的网络ID，这样就算加入了
<img src="http://images.quesox.com/i/2025/01/06/677b8c4b925fb.webp" alt="7646116098f41eb3926bad9e40a9675a30eb94d3.webp"></p>
</li>
<li>
<p>选择join下面的那个网络id，然后把Allow都勾上（也可以看你自己情况）回到网页端操作授权客户端
<img src="http://images.quesox.com/i/2025/01/06/677b8c4d426ec.webp" alt="ad8d97400449b78dbb1c7eb9ac134ab17ead0955.webp"></p>
</li>
</ol>
<h4 id="给每一台设备分配ip">给每一台设备分配IP</h4>
<p>在上面两部做完之后我们就可以看到添加的设备了
<img src="http://images.quesox.com/i/2025/01/06/677b8d8701e2b.webp" alt="9e545155b24c24f0218c5e0bebbd04aec1c71dba.webp"></p>
<div style="width: 95%; overflow-x: auto;">
<table>
  <thead>
      <tr>
          <th style="text-align: center">Edit</th>
          <th style="text-align: center">Auth</th>
          <th style="text-align: center">Address</th>
          <th style="text-align: center">Name/Desc</th>
          <th style="text-align: center">Managed IPs</th>
          <th style="text-align: center">Last Seen</th>
          <th style="text-align: center">Version</th>
          <th style="text-align: center">Phyical IP</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: center"><strong>编辑</strong></td>
          <td style="text-align: center">是否已授权</td>
          <td style="text-align: center">地址（无关紧要）</td>
          <td style="text-align: center">名字描述（编辑中设置）</td>
          <td style="text-align: center"><strong>虚拟内网IP</strong></td>
          <td style="text-align: center">上次上线时间</td>
          <td style="text-align: center">版本</td>
          <td style="text-align: center">真实物理IP</td>
      </tr>
  </tbody>
</table>
</div>
<p>这里我们只需要关注虚拟内网IP部分和编辑</p>
<p>下拉到Advanced部分，选择一个你喜欢的网段（之后我们会通过这个来访问）
<img src="http://images.quesox.com/i/2025/01/06/677b8c4da4848.webp" alt="e086cfa8cc5a5ae4720a7124efb3c01f73fc64c0_2_1035x606.webp">
回到上面，点击edit，然后填写你设备的名称和分配一个喜欢的ip，前面与你的网段相同，最后一位自己选择，这里给一个翻译版本。
<img src="http://images.quesox.com/i/2025/01/06/677b8c4eaecf4.webp" alt="074ae141f23af13c4f808b12086f3100c5a1ef5b_2_408x750.webp"></p>
<p>做完上面几步没问题的话我们就可以试试看是否组网成功了</p>
<p>设备互ping一下,ping的地址是你设置的<strong>虚拟内网ip</strong> 而不是真实物理ip
<img src="http://images.quesox.com/i/2025/01/06/677b8c4f0ec0c.webp" alt="d4c8e3adb5274f300177fd57cd563952c7b73f72.webp"></p>
<p>组网完成</p>
<h2 id="应用部分">应用部分</h2>
<h3 id="远程桌面游戏串流-moonlightsunshine">远程桌面游戏串流 Moonlight+sunshine</h3>
<p>物理距离200公里的串流延迟5-8ms左右，帧数是动态的不是只有15fps，玩游戏的时候可以跑到240fps</p>
<p>这一部分需要的话再补充教程
<img src="http://images.quesox.com/i/2025/01/06/677b8c4f607ba.webp" alt="52f0e07d7ca5c213fdb6fe063cbc83508d7dfc72_2_1035x510.webp">
<img src="http://images.quesox.com/i/2025/01/06/677b8c4fd077c.webp" alt="0778c721f2af69a6e2d505a27ce1b1599e6c4c03.webp"></p>
<h3 id="群晖与webdav以及文件传输访问">群晖与webdav以及文件传输访问</h3>
<p>异地内网下访问各个设备</p>
<p><img src="http://images.quesox.com/i/2025/01/06/677b8c4fd077c.webp" alt="0778c721f2af69a6e2d505a27ce1b1599e6c4c03.webp"></p>
<p>本文完，下一篇写什么各位可以给点建议。</p>

                
            </div>
        </div>
        <div class="single-tag-div">
             
            <span class="single-tag"  > #All</span>
             
            <span class="single-tag"  > #AIO</span>
             
            <span class="single-tag"  > #GUIDE</span>
            

        </div>


    </div>

</div>

  </main>

    
  
  <footer>
 
  </footer>
</body>
</html>
